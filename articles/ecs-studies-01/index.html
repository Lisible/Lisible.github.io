<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.985875519b3d52c40901.css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font:112.5%/1.45em georgia,serif,sans-serif;box-sizing:border-box;overflow-y:scroll;background-color:#282828}body{margin:0;color:#ebdbb2;font-family:georgia,serif}h1{margin-bottom:9.1rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700}article h1{font-size:1.3em;margin-bottom:.1em}article h2{font-size:1.2em}article time{font-size:.8em}a,a:visited{color:inherit}ul{list-style-type:none;padding-left:0}</style><meta name="generator" content="Gatsby 2.26.1"/><title data-react-helmet="true">ECS Studies - 01 - What&#x27;s an Ecs ? | Lisible</title><meta data-react-helmet="true" name="description" content="My personal website"/><meta data-react-helmet="true" property="og:title" content="ECS Studies - 01 - What&#x27;s an Ecs ?"/><meta data-react-helmet="true" property="og:description" content="My personal website"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@gatsbyjs"/><meta data-react-helmet="true" name="twitter:title" content="ECS Studies - 01 - What&#x27;s an Ecs ?"/><meta data-react-helmet="true" name="twitter:description" content="My personal website"/><link as="script" rel="preload" href="/webpack-runtime-c8b75682e3fab5a7edb0.js"/><link as="script" rel="preload" href="/framework-83e11af5cf111be5ad89.js"/><link as="script" rel="preload" href="/app-14650019c1c10a9c3b23.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/commons-3c8987b4a2dbd7683b31.js"/><link as="script" rel="preload" href="/component---src-templates-article-template-tsx-015abbf315624871ac1c.js"/><link as="fetch" rel="preload" href="/page-data/articles/ecs-studies-01/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header style="margin-bottom:1.45rem"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem"><h1 style="margin:0"><a style="text-decoration:none" href="/">Lisible</a></h1></div></header><div style="margin:0 auto;max-width:960px;padding:0 1.0875rem 1.45rem"><main><div class="article-container"><article><h1>ECS Studies - 01 - What&#x27;s an Ecs ?</h1><time datetime="2021-02-04">2021-02-04</time><div class="article-content"><p>In this article series I'll talk about my journey implementing an
<strong>Entity component system (Ecs)</strong> which is a pattern commonly used in game and
game engine development. I will implement it in Rust, and thus these
articles will be Rust-centered. These articles aren't meant to be a tutorial,
these are my personal study notes.</p>
<h2>The pattern</h2>
<p>An Entity component system allows to describe a game's entities as a
set of components. The components are plain data with no logic
attached to them. The logic is done through systems which will query
and mutate the components stored in the Ecs.</p>
<p>Some entity could be a Character entity which has a Sword and a Health
component. We could then have some system that checks if a Character
attacks another one and updates the Health component of the attacked entity.</p>
<p>In summary, there are 3 types of actors in an Ecs:</p>
<ul>
<li><strong>Entities</strong>: Uniquely identifiable sets of components</li>
<li><strong>Components</strong>: The data defining entities</li>
<li><strong>Systems</strong>: The logic applied to the entities' components</li>
</ul>
<p>This pattern has the advantage of easily allowing to add and remove
components from entities at runtime. It can also be implemented in a
cache-friendly way and a "parallel-friendly" way.</p>
<h2>Different approaches</h2>
<p>Writing an Ecs can be challenging in several ways. First, if ensuring
fast access is wanted, it is required to decide of a smart way of
storing the entities and their components. I learnt from <a href="https://csherratt.github.io/blog/posts/specs-and-legion/">this article</a>
written by <a href="https://github.com/csherratt">@csherratt</a> two ways of
storing Ecs data that are used in the two most known Ecs library for
the Rust programming language.</p>
<p><strong>Specs</strong> stores each component of the same type in a single storage while
<strong>Legion</strong> groups them by "<strong>Archetypes</strong>". An Archetype is a collection of
the components of identically structured entities.</p>
<p>I won't explore the definition of these concepts more in depth in this article since
@csherratt's article already fulfill this purpose.</p>
<p>Another challenging aspect is, as in any data structure and particularly
the ones used in a parallel concepts, ensuring its soundness. This is
especially true in the context of using a programming language like
Rust which will either scream at you if what you try to do is unsound or
will go brrrr if unsound unsafe code is used to get around it.</p>
<h2>Conclusion</h2>
<p>This short introduction will be followed by several case studies of
implementation details of several Ecs implementations in Rust, such as
the previously cited <a href="https://github.com/amethyst/specs"><strong>Specs</strong></a> and <a href="https://github.com/amethyst/legion"><strong>Legion</strong></a>, but also <a href="https://github.com/Ralith/hecs"><strong>hecs</strong></a> or <a href="https://github.com/bevyengine/bevy/tree/master/crates/bevy_ecs"><strong>bevy_ecs</strong></a>
(which is a fork of hecs).</p></div></article></div></main><footer style="margin-top:2rem">© <!-- -->2021<!-- -->, Clément Sibille</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/ecs-studies-01";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-ca8adf9770cfeec4c092.js"],"app":["/app-14650019c1c10a9c3b23.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-1227f7eb3dd74a65a765.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-50a9e50500c3fcbff05c.js"],"component---src-templates-article-template-tsx":["/component---src-templates-article-template-tsx-015abbf315624871ac1c.js"]};/*]]>*/</script><script src="/polyfill-ca8adf9770cfeec4c092.js" nomodule=""></script><script src="/component---src-templates-article-template-tsx-015abbf315624871ac1c.js" async=""></script><script src="/commons-3c8987b4a2dbd7683b31.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-14650019c1c10a9c3b23.js" async=""></script><script src="/framework-83e11af5cf111be5ad89.js" async=""></script><script src="/webpack-runtime-c8b75682e3fab5a7edb0.js" async=""></script></body></html>